<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warehouse Product Judge</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Add jsQR library via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="left-section">
            <h2>Product QR Code</h2>
            <img src="qr-code.png" alt="QR Code for Product" id="qr-code-image">
            <p>QR Data: <span id="qr-output">Not scanned yet</span></p>
        </div>
        <div class="right-section">
            <h2>Select Issue Type</h2>
            <div class="combined-options">
                <button class="option-btn" data-parent="generic" data-sub="penetration">1. Generic - Penetration</button>
                <button class="option-btn" data-parent="generic" data-sub="spillage">2. Generic - Spillage</button>
                <button class="option-btn" data-parent="generic" data-sub="deformation">3. Generic - Deformation</button>
                <button class="option-btn" data-parent="plastic" data-sub="penetration">4. Plastic - Penetration</button>
                <button class="option-btn" data-parent="plastic" data-sub="spillage">5. Plastic - Spillage</button>
                <button class="option-btn" data-parent="plastic" data-sub="deformation">6. Plastic - Deformation</button>
                <button class="option-btn" data-parent="cover" data-sub="penetration">7. Cover - Penetration</button>
                <button class="option-btn" data-parent="cover" data-sub="spillage">8. Cover - Spillage</button>
                <button class="option-btn" data-parent="cover" data-sub="deformation">9. Cover - Deformation</button>
            </div>
            <button class="submit-btn" id="submit-btn" disabled>Submit (Enter)</button>
            <div class="selection-display" id="selection-display">
                <p>Selected: <span id="selected-options">None</span></p>
            </div>
        </div>
    </div>
    <script>
        // Load and scan the QR code when the page loads
        window.onload = function() {
            const qrImage = document.getElementById('qr-code-image');
            const qrOutput = document.getElementById('qr-output');
            
            qrImage.onload = function() {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = qrImage.width;
                canvas.height = qrImage.height;
                context.drawImage(qrImage, 0, 0, qrImage.width, qrImage.height);
                
                const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
                const code = jsQR(imageData.data, imageData.width, imageData.height);
                
                if (code) {
                    qrOutput.textContent = code.data;
                } else {
                    qrOutput.textContent = "Could not decode QR code";
                }
            };
            
            // Trigger onload if image is already cached
            if (qrImage.complete) {
                qrImage.onload();
            }
        };
    </script>
    <script src="script.js"></script>
</body>
</html>
